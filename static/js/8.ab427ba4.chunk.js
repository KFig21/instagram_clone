(this.webpackJsonpinstagram_clone=this.webpackJsonpinstagram_clone||[]).push([[8],{55:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(53),c=n.n(r),a=n(54),s=n(30),i=n(1),l=n(31),o=n(56);function u(){var e=Object(i.useState)({}),t=Object(s.a)(e,2),n=t[0],r=t[1],u=Object(i.useContext)(l.a).user;return Object(i.useEffect)((function(){function e(){return(e=Object(a.a)(c.a.mark((function e(){var t,n,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(o.i)(u.uid);case 2:t=e.sent,n=Object(s.a)(t,1),a=n[0],r(a);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(null===u||void 0===u?void 0:u.uid)&&function(){e.apply(this,arguments)}()}),[u]),{userInfo:n}}},57:function(e,t,n){"use strict";t.a=n.p+"static/media/newPost.84a497c2.png"},60:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(1),c=n(18),a=n(19),s=n(31),i=n(9),l=n(55),o=n(57),u=n(5),b=n(58),j=n(4);function d(){var e=Object(r.useContext)(a.a).firebase,t=Object(r.useContext)(s.a).user,n=Object(l.a)().userInfo,d=Object(u.g)();return Object(j.jsx)("header",{className:"h-16 bg-white border-b border-gray-primary sticky top-0 z-50",children:Object(j.jsx)("div",{className:"container mx-auto max-w-screen-lg h-full",children:Object(j.jsxs)("div",{className:"flex justify-between h-full pr-5 pl-5",children:[Object(j.jsx)("div",{className:"text-gray-700 text-center flex  items-center align-items cursor-pointer",children:Object(j.jsx)("h1",{className:"flex justify-center w-full",children:Object(j.jsx)(c.b,{to:i.a,"aria-label":"instagram header",children:Object(j.jsx)("img",{src:b.a,alt:"instagram header",className:"mt-2 w-28"})})})}),Object(j.jsx)("div",{className:"text-gray-700 text-center flex flex-none items-center align-items",children:t?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(c.b,{to:{pathname:"".concat(i.g),state:{type:"post"}},"aria-label":"upload post",children:Object(j.jsx)("img",{src:o.a,alt:"add post",className:"w-8 mr-4 lg:mr-6 cursor-pointer"})}),Object(j.jsx)(c.b,{to:i.a,"aria-label":"timeline",children:Object(j.jsxs)("svg",{className:"w-8 mr-4 lg:mr-6 text-black-light cursor-pointer",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[Object(j.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"}),Object(j.jsx)("title",{children:"Timeline"})]})}),Object(j.jsx)("button",{type:"button",title:"Sign-out",onClick:function(){return e.auth().signOut()},onKeyDown:function(t){"enter"===t.key&&(d.push("/login"),e.auth().signOut())},children:Object(j.jsx)("svg",{className:"w-8 mr-4 lg:mr-6 text-black-light cursor-pointer",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(j.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})}),Object(j.jsx)("div",{className:"flex items-center cursor-pointer",children:Object(j.jsx)(c.b,{to:"/p/".concat(n.username),children:Object(j.jsx)("img",{title:"".concat(n.username),className:"rounded-full h-8 w-8 flex object-cover",src:"".concat(n.avatar),alt:"".concat(n.username," profile")})})})]}):Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(c.b,{to:i.b,children:Object(j.jsx)("button",{type:"button",className:"bg-blue-primary font-bold text-sm rounded text-white w-20 h-8",children:"Login"})}),Object(j.jsx)(c.b,{to:i.f,children:Object(j.jsx)("button",{type:"button",className:"bg-white font-bold text-sm rounded text-blue-primary w-20 h-8",children:"Sign-up"})})]})})]})})})}},61:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r=n(1),c=n(18),a=n(19),s=n(31),i=n(9),l=n(5),o=n(58),u=n(4);function b(){var e=Object(r.useContext)(a.a).firebase,t=Object(r.useContext)(s.a).user,n=Object(l.g)();return Object(u.jsx)("header",{className:"h-12 bg-white border-b border-gray-primary sticky top-0 z-50 mobile-header relative",children:Object(u.jsx)("div",{className:"container mx-auto max-w-screen-lg h-full",children:Object(u.jsxs)("div",{className:"flex justify-end h-full pr-5 pl-5",children:[Object(u.jsx)("div",{className:"text-gray-700 text-center flex  items-center align-items cursor-pointer absolute left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2",children:Object(u.jsx)("h1",{className:"flex justify-center w-full",children:Object(u.jsx)(c.b,{to:i.a,"aria-label":"instagram header",children:Object(u.jsx)("img",{src:o.a,alt:"instagram header",className:"mt-2 w-28"})})})}),Object(u.jsx)("div",{className:"text-gray-700 text-center flex flex-none items-center align-items",children:t?Object(u.jsx)(u.Fragment,{children:Object(u.jsx)("button",{type:"button",title:"Sign-out",onClick:function(){return e.auth().signOut()},onKeyDown:function(t){"enter"===t.key&&(n.push("/login"),e.auth().signOut())},children:Object(u.jsx)("svg",{className:"w-8  text-black-light cursor-pointer",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(u.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})})}):Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(c.b,{to:i.b,children:Object(u.jsx)("button",{type:"button",className:"bg-blue-primary font-bold text-sm rounded text-white w-20 h-8",children:"Login"})}),Object(u.jsx)(c.b,{to:i.f,children:Object(u.jsx)("button",{type:"button",className:"bg-white font-bold text-sm rounded text-blue-primary w-20 h-8",children:"Sign-up"})})]})})]})})})}},62:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(1),c=n(18),a=n(31),s=n(9),i=n(55),l=n(57),o=(n(63),n(4));function u(){var e=Object(r.useContext)(a.a).user,t=Object(i.a)().userInfo;return Object(o.jsx)("footer",{className:"h-12 bg-white border-b border-gray-primary fixed bottom-0 z-50 w-screen",children:Object(o.jsx)("div",{className:"container mx-auto max-w-screen-lg h-full",children:Object(o.jsx)("div",{className:"flex h-full px-8",children:Object(o.jsx)("div",{className:"text-gray-700 text-center flex justify-between w-screen items-center align-items",children:e?Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(c.b,{to:{pathname:"".concat(s.g),state:{type:"post"}},"aria-label":"upload post",children:Object(o.jsx)("img",{src:l.a,alt:"add post",className:"w-8  lg:mr-6 cursor-pointer"})}),Object(o.jsx)(c.b,{to:s.a,"aria-label":"timeline",children:Object(o.jsxs)("svg",{className:"w-8  lg:mr-6 text-black-light cursor-pointer",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[Object(o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"}),Object(o.jsx)("title",{children:"Timeline"})]})}),Object(o.jsx)("div",{className:"flex items-center cursor-pointer",children:Object(o.jsx)(c.b,{to:"/p/".concat(t.username),children:Object(o.jsx)("img",{title:"".concat(t.username),className:"rounded-full h-8 w-8 flex object-cover",src:"".concat(t.avatar),alt:"".concat(t.username," profile")})})})]}):Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(c.b,{to:s.b,children:Object(o.jsx)("button",{type:"button",className:"bg-blue-primary font-bold text-sm rounded text-white w-20 h-8",children:"Login"})}),Object(o.jsx)(c.b,{to:s.f,children:Object(o.jsx)("button",{type:"button",className:"bg-white font-bold text-sm rounded text-blue-primary w-20 h-8",children:"Sign-up"})})]})})})})})}},63:function(e,t,n){},66:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var r=n(53),c=n.n(r),a=n(54),s=n(30),i=n(1),l=n(18),o=n(56),u=n(9),b=n(5),j=n(55),d=n(4);function m(e){var t=e.userId,n=e.docId,r=e.photoStorageName,m=e.page,h=Object(i.useState)(""),x=Object(s.a)(h,2),f=x[0],p=x[1],O=Object(i.useState)(!1),g=Object(s.a)(O,2),v=g[0],w=g[1],y=Object(j.a)().userInfo,N=Object(b.g)();Object(i.useEffect)((function(){function e(){return(e=Object(a.a)(c.a.mark((function e(){var n,r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(o.i)(t);case 2:n=e.sent,r=Object(s.a)(n,1),(a=r[0]).userId?p(a):N.push(u.c);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t,N]);return Object(d.jsx)("div",{className:"flex border-b border-gray-primary h-4 p-4 py-8",children:Object(d.jsxs)("div",{className:"flex items-center justify-between w-full",children:[Object(d.jsxs)(l.b,{to:"/p/".concat(f.username),className:"flex items-center",children:[Object(d.jsx)("img",{src:f.avatar,className:"rounded-full h-8 w-8 flex mr-3 object-cover",alt:"".concat(f.username," avi")}),Object(d.jsx)("p",{className:"font-bold",children:f.username})]}),Object(d.jsxs)("div",{className:"flex justify-center items-center",children:[v&&Object(d.jsx)("button",{onClick:function(){Object(o.b)(n,r),setTimeout((function(){N.push("/")}),500)},className:"hover:bg-red-primary hover:text-white font-bold h-5/6 px-2 py-1 rounded mr-6 duration-150",title:"confirm delete",children:"delete?"}),y.userId===f.userId&&"post"===m&&Object(d.jsx)("p",{className:"font-bold text-4xl hover:text-red-primary mb-2 cursor-pointer duration-150 ".concat(v?"hover:text-green-primary":"hover:text-red-primary"),onClick:function(){w(!v)},title:v?"cancel delete":"delete your post",children:"\xd7"})]})]})})}},80:function(e,t,n){},94:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return C}));var r=n(30),c=n(1),a=n(5),s=n(60),i=n(62),l=n(61),o=n(53),u=n.n(o),b=n(54),j=n(86),d=function(e){return new Promise((function(t,n){var r=new Image;r.addEventListener("load",(function(){return t(r)})),r.addEventListener("error",(function(e){return n(e)})),r.setAttribute("crossOrigin","anonymous"),r.src=e}))};function m(e){return e*Math.PI/180}function h(e,t){return x.apply(this,arguments)}function x(){return(x=Object(b.a)(u.a.mark((function e(t,n){var r,c,a,s,i,l,o,b=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=b.length>2&&void 0!==b[2]?b[2]:0,e.next=3,d(t);case 3:return c=e.sent,a=document.createElement("canvas"),s=a.getContext("2d"),i=Math.max(c.width,c.height),l=i/2*Math.sqrt(2)*2,a.width=l,a.height=l,s.translate(l/2,l/2),s.rotate(m(r)),s.translate(-l/2,-l/2),s.drawImage(c,l/2-.5*c.width,l/2-.5*c.height),o=s.getImageData(0,0,l,l),a.width=n.width,a.height=n.height,s.putImageData(o,Math.round(0-l/2+.5*c.width-n.x),Math.round(0-l/2+.5*c.height-n.y)),e.abrupt("return",a.toDataURL("image/jpeg"));case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}n(80);var f=n(4);function p(e){var t=e.selectedImage,n=e.handleImage,a=e.handleEditingCancel,s=e.handleEditingContinue,i=e.handleFinishEditingContinue,l=Object(c.useState)({x:0,y:0}),o=Object(r.a)(l,2),d=o[0],m=o[1],x=Object(c.useState)(1),p=Object(r.a)(x,2),O=p[0],g=p[1],v=Object(c.useState)(null),w=Object(r.a)(v,2),y=w[0],N=w[1],k=Object(c.useCallback)((function(e,t){N(t)}),[]),C=Object(c.useCallback)(Object(b.a)(u.a.mark((function e(){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(),e.next=4,h(t,y);case 4:r=e.sent,n(r),i(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])}))),[i,s,n,t,y]);return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("div",{className:"border border-gray-primary mt-12 image-cropper",children:Object(f.jsx)(j.a,{image:t,crop:d,zoom:O,aspect:1,onCropChange:m,onCropComplete:k,onZoomChange:g})}),Object(f.jsxs)("div",{className:"w-full mt-5 flex flex-col justify-center items-center",children:[Object(f.jsx)("input",{type:"range",value:O,min:1,max:10,step:.1,"aria-labelledby":"Zoom",onChange:function(e){g(e.target.value)},className:"slider"}),Object(f.jsx)("span",{className:"mt-2",children:"Zoom"})]}),Object(f.jsx)("div",{className:"h-16 mb-12 lg:mb-0 bg-white border-t border-b border-gray-primary absolute inset-x-0 bottom-0 justify-center",children:Object(f.jsxs)("div",{className:"flex w-3/5 h-full items-center justify-around m-auto",children:[Object(f.jsx)("button",{className:"bg-blue-primary font-bold text-sm rounded text-white w-20 h-8",onClick:a,children:"Cancel"}),Object(f.jsx)("button",{className:"bg-blue-primary font-bold text-sm rounded text-white w-20 h-8",onClick:C,children:"Continue"})]})})]})}var O=n(55),g=n(33),v=n(9),w=n(66),y=n(56);function N(e){var t=e.selectedImage,n=e.handleFinishEditingCancel,s=e.fileName,i=e.type,l=Object(c.useState)(""),o=Object(r.a)(l,2),u=o[0],b=o[1],j=Object(c.useState)(!1),d=Object(r.a)(j,2),m=d[0],h=d[1],x=Object(O.a)().userInfo,p=Object(g.a)().user;return Object(f.jsxs)("div",{className:"flex flex-col items-center w-full h-full justify-center ",children:[x.username===p.displayName&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("div",{className:"rounded col-span-4 border border-gray-primary bg-white",children:[Object(f.jsx)(w.a,{userId:x.userId,page:"edit"}),Object(f.jsx)("div",{className:"flex items-center justify-center outline-none h-full max-w-sm max-h-sm",children:Object(f.jsx)("img",{className:"w-full cursor-pointer",src:t,alt:"The chosen, cropped post"})}),"post"===i&&Object(f.jsx)("form",{className:"flex flex-row place-items-center justify-evenly h-auto",children:Object(f.jsx)("textarea",{className:"outline-none w-full p-2",placeholder:"Write a caption...",onChange:function(e){var t=e.currentTarget.value;t.length<2200&&b(t)},"ng-trim":!1,type:"text"})})]}),Object(f.jsx)("div",{className:"h-16 mb-12 lg:mb-0 bg-white border-t border-b border-gray-primary absolute inset-x-0 bottom-0 justify-center",children:Object(f.jsxs)("div",{className:"flex w-3/5 h-full items-center justify-around m-auto",children:[Object(f.jsx)("button",{className:"bg-blue-primary font-bold text-sm rounded text-white w-20 h-8",onClick:n,children:"Back"}),Object(f.jsx)("button",{className:"bg-blue-primary font-bold text-sm rounded text-white w-20 h-8",onClick:"post"===i?function(){Object(y.m)(x,t,u,s),setTimeout((function(){h(!0)}),2e3)}:function(){Object(y.q)(x,t,s),setTimeout((function(){h(!0)}),2e3)},children:"post"===i?"Post":"Confirm"})]})})]}),m&&Object(f.jsx)(a.a,{to:v.a})]})}function k(e){var t=e.type,n=Object(c.useState)(""),a=Object(r.a)(n,2),s=a[0],i=a[1],l=Object(c.useState)(!1),o=Object(r.a)(l,2),u=o[0],b=o[1],j=Object(c.useState)(!1),d=Object(r.a)(j,2),m=d[0],h=d[1],x=Object(c.useState)(!1),O=Object(r.a)(x,2),g=O[0],v=O[1],w=Object(c.useState)(""),y=Object(r.a)(w,2),k=y[0],C=y[1];return Object(f.jsxs)("div",{className:"flex items-center justify-center w-full",children:[!u&&!m&&!g&&Object(f.jsx)("div",{className:"p-24 shadow-lg bg-white outline-none",style:{zIndex:"5"},children:Object(f.jsxs)("label",{children:[Object(f.jsx)("div",{className:"flex items-center justify-center ",children:Object(f.jsxs)("svg",{version:"1.1",id:"Capa_1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 490.2 490.2",className:"w-24 text-black-light cursor-pointer",children:[Object(f.jsx)("path",{d:"M418.5,418.5c95.6-95.6,95.6-251.2,0-346.8s-251.2-95.6-346.8,0s-95.6,251.2,0,346.8S322.9,514.1,418.5,418.5z M89,89\r c86.1-86.1,226.1-86.1,312.2,0s86.1,226.1,0,312.2s-226.1,86.1-312.2,0S3,175.1,89,89z"}),Object(f.jsx)("path",{d:"M245.1,336.9c3.4,0,6.4-1.4,8.7-3.6c2.2-2.2,3.6-5.3,3.6-8.7v-67.3h67.3c3.4,0,6.4-1.4,8.7-3.6c2.2-2.2,3.6-5.3,3.6-8.7\r c0-6.8-5.5-12.3-12.2-12.2h-67.3v-67.3c0-6.8-5.5-12.3-12.2-12.2c-6.8,0-12.3,5.5-12.2,12.2v67.3h-67.3c-6.8,0-12.3,5.5-12.2,12.2\r c0,6.8,5.5,12.3,12.2,12.2h67.3v67.3C232.8,331.4,238.3,336.9,245.1,336.9z"})]})}),Object(f.jsx)("input",{style:{display:"none"},type:"file",name:"file",accept:"image/*",onChange:function(e){var t=e.target.files[0],n=URL.createObjectURL(t);C(t.name),i(n),h(!m),b(!u)}}),Object(f.jsx)("div",{className:"flex items-end justify-evenly bg-none font-semibold cursor-pointer outline-none p-4",children:"Choose image to upload"})]})}),s&&!g&&m&&u&&Object(f.jsx)("div",{style:{zIndex:"5"},children:Object(f.jsx)(p,{selectedImage:s,handleImage:function(e){i(e)},handleEditingCancel:function(){h(!m),b(!u)},handleEditingContinue:function(){h(!m)},handleFinishEditingContinue:function(){v(!g)}})}),g&&u&&Object(f.jsx)("div",{style:{zIndex:"5"},children:Object(f.jsx)(N,{selectedImage:s,handleFinishEditingCancel:function(){v(!g),h(!m)},fileName:k,type:t})}),Object(f.jsx)("p",{className:"absolute",style:{zIndex:"1"},children:"loading... (possibly)"})]})}function C(){var e=Object(c.useState)(""),t=Object(r.a)(e,2),n=t[0],o=t[1],u=Object(a.h)();return Object(c.useEffect)((function(){o(u.state.type)}),[u.state.type,n]),Object(f.jsxs)("div",{className:"bg-gray-background",children:[Object(f.jsx)(s.a,{}),Object(f.jsx)(l.a,{}),Object(f.jsx)("div",{className:"mx-auto max-w-screen-lg justify-center items-center flex",style:{height:"75vh"},children:Object(f.jsx)(k,{type:n})}),Object(f.jsx)(i.a,{})]})}}}]);
//# sourceMappingURL=8.ab427ba4.chunk.js.map