{"version":3,"sources":["components/profile/ProfileHeader.js","assets/plus-sign.png","components/profile/Photos.js","components/profile/Follows.js","components/profile/UserProfile.js","hooks/use-following.js","hooks/use-followers.js","pages/Profile.js"],"names":["ProfileHeader","photosCount","followerCount","setFollowerCount","handleShowFollowers","handleShowFollowing","handleShowPhotos","profile","avatar","profileDocId","docId","profileUserId","userId","fullName","following","followers","profileUsername","username","userInfo","useUser","history","useHistory","useState","isFollowingProfile","setIsFollowingProfile","deletePostButton","setDeletePostButton","activeBtnFollow","loggedInUsersProfile","handleToggleFollow","a","toggleFollow","useEffect","isLoggedInUserFollowingProfile","isUserFollowingProfile","isFollowing","className","style","position","left","title","onClick","deleteProfile","setTimeout","push","src","alt","to","pathname","ROUTES","state","type","onKeyDown","e","key","undefined","count","width","height","length","Photos","photos","map","photo","imageSrc","caption","xmlns","viewBox","fill","fillRule","d","clipRule","likes","comments","Followers","follows","user","UserProfile","showPhotos","setShowPhotos","showFollowers","setShowFollowers","showFollowing","setShowFollowing","setFollowing","getUserByUserId","followingArray","getFollowingOrFollowers","fetchFollowing","useFollowing","setFollowers","followersArray","fetchFollowers","useFollowers","useReducer","newState","photosCollection","dispatch","getUserPhotosByUsername","followersCount","sort","b","dateCreated","getProfileInfoAndPhotos","Profile","useParams","setUser","getUserByUsername","doesUserExist","checkUserExists","Header"],"mappings":"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","file":"static/js/13.b4ef3d65.chunk.js","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useHistory, Link } from \"react-router-dom\";\r\nimport PropTypes from \"prop-types\";\r\nimport Skeleton from \"react-loading-skeleton\";\r\nimport useUser from \"../../hooks/use-user\";\r\nimport { isUserFollowingProfile, toggleFollow } from \"../../services/firebase\";\r\nimport plusSign from \"../../assets/plus-sign.png\";\r\nimport { deleteProfile } from \"../../services/firebase\";\r\nimport * as ROUTES from \"../../constants/routes\";\r\n\r\nexport default function ProfileHeader({\r\n  photosCount,\r\n  followerCount,\r\n  setFollowerCount,\r\n  handleShowFollowers,\r\n  handleShowFollowing,\r\n  handleShowPhotos,\r\n  profile: {\r\n    avatar,\r\n    docId: profileDocId,\r\n    userId: profileUserId,\r\n    fullName,\r\n    following = [],\r\n    followers = [],\r\n    username: profileUsername,\r\n  },\r\n}) {\r\n  const { userInfo } = useUser();\r\n  const history = useHistory();\r\n  const [isFollowingProfile, setIsFollowingProfile] = useState(null);\r\n  const [deletePostButton, setDeletePostButton] = useState(false);\r\n  const activeBtnFollow =\r\n    userInfo?.username && userInfo?.username !== profileUsername;\r\n\r\n  const loggedInUsersProfile = userInfo?.username === profileUsername;\r\n\r\n  const handleToggleFollow = async () => {\r\n    setIsFollowingProfile((isFollowingProfile) => !isFollowingProfile);\r\n    setFollowerCount({\r\n      followerCount: isFollowingProfile ? followerCount - 1 : followerCount + 1,\r\n    });\r\n\r\n    await toggleFollow(\r\n      isFollowingProfile,\r\n      userInfo.docId,\r\n      profileDocId,\r\n      profileUserId,\r\n      userInfo.userId\r\n    );\r\n  };\r\n\r\n  const handleX = () => {\r\n    setDeletePostButton(!deletePostButton);\r\n  };\r\n\r\n  const handleDelete = () => {\r\n    deleteProfile(userInfo);\r\n    setTimeout(function () {\r\n      history.push(\"/login\");\r\n    }, 500);\r\n  };\r\n\r\n  useEffect(() => {\r\n    const isLoggedInUserFollowingProfile = async () => {\r\n      const isFollowing = await isUserFollowingProfile(\r\n        userInfo.username,\r\n        profileUserId\r\n      );\r\n      setIsFollowingProfile(!!isFollowing);\r\n    };\r\n\r\n    if (userInfo?.username && profileUserId) {\r\n      isLoggedInUserFollowingProfile();\r\n    }\r\n  }, [userInfo.username, profileUserId]);\r\n\r\n  return (\r\n    <div className=\"grid grid-cols-3 gap-4 justify-between mx-auto max-w-screen-lg mt-6 pb-6 border-b border-gray-primary \">\r\n      {/* delete profile */}\r\n      <div className=\"flex\" style={{ position: \"absolute\", left: \"82%\" }}>\r\n        {loggedInUsersProfile &&\r\n          userInfo.userId !==\r\n            \"i6isWMwVjqaouBIqqSERS7jCnyN2\" /* test account cant be deleted */ && (\r\n            <div\r\n              title={deletePostButton ? \"cancel delete\" : \"delete your profile\"}\r\n              onClick={handleX}\r\n            >\r\n              <p\r\n                className={`font-bold text-4xl hover:text-red-primary mb-2 cursor-pointer duration-150 ${\r\n                  deletePostButton\r\n                    ? `hover:text-green-primary`\r\n                    : `hover:text-red-primary`\r\n                }`}\r\n              >\r\n                ×\r\n              </p>\r\n            </div>\r\n          )}\r\n        {deletePostButton && (\r\n          <button\r\n            onClick={handleDelete}\r\n            className=\"hover:bg-red-primary hover:text-white font-bold h-12 px-2 py-1 rounded ml-6 duration-150\"\r\n            title=\"confirm delete\"\r\n          >\r\n            delete?\r\n          </button>\r\n        )}\r\n      </div>\r\n      <div className=\"container flex justify-center relative group w-40 m-auto\">\r\n        <img\r\n          src={avatar}\r\n          className=\"rounded-full h-40 w-40 flex object-cover\"\r\n          alt={`${profileUsername} avi`}\r\n        />\r\n        {/* if logged in user is on thei own profile and hovers over their avi, add the ability to change avi */}\r\n        {loggedInUsersProfile && (\r\n          <Link\r\n            to={{\r\n              pathname: `${ROUTES.UPLOAD_POST}`,\r\n              state: { type: \"avatar\" },\r\n            }}\r\n            aria-label=\"upload post\"\r\n            className=\"absolute justify-center\"\r\n          >\r\n            <div className=\" bottom-0 bg-gray-200 z-10 w-40 justify-evenly items-center h-40 bg-black-faded group-hover:flex hidden rounded-full\">\r\n              <img\r\n                src={plusSign}\r\n                alt=\"plus\"\r\n                className=\"flex items-center h-20 w-20 opacity-60 cursor-pointer\"\r\n              />\r\n            </div>\r\n          </Link>\r\n        )}\r\n      </div>\r\n      <div className=\"flex items-center justify-center flex-col col-span-2\">\r\n        <div className=\"container flex items-center\">\r\n          <p className=\"text-2xl mr-4\">{profileUsername}</p>\r\n          {activeBtnFollow && (\r\n            <button\r\n              className=\"bg-blue-primary font-bold text-sm rounded text-white w-20 h-8\"\r\n              type=\"button\"\r\n              onClick={handleToggleFollow}\r\n              onKeyDown={(e) => {\r\n                if (e.key === \"Enter\") {\r\n                  handleToggleFollow();\r\n                }\r\n              }}\r\n            >\r\n              {isFollowingProfile ? \"Unfollow\" : \"Follow\"}\r\n            </button>\r\n          )}\r\n        </div>\r\n        <div className=\"container flex mt-4\">\r\n          {followers === undefined || following === undefined ? (\r\n            <Skeleton count={1} width={677} height={24} />\r\n          ) : (\r\n            <>\r\n              <p className=\"mr-10 cursor-pointer\" onClick={handleShowPhotos}>\r\n                <span className=\"font-bold\">{photosCount}</span>\r\n                {` `} {photosCount === 1 ? `photo` : `photos`}\r\n              </p>\r\n              <p className=\"mr-10 cursor-pointer\" onClick={handleShowFollowers}>\r\n                <span className=\"font-bold\">{followerCount}</span>\r\n                {` `} {followerCount === 1 ? `follower` : `followers`}\r\n              </p>\r\n              <p className=\"mr-10 cursor-pointer\" onClick={handleShowFollowing}>\r\n                <span className=\"font-bold\">{following.length}</span> following\r\n              </p>\r\n            </>\r\n          )}\r\n        </div>\r\n        <div className=\"container mt-4\">\r\n          <p className=\"font-medium\">\r\n            {!fullName ? <Skeleton count={1} height={24} /> : fullName}\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nProfileHeader.propTypes = {\r\n  photosCount: PropTypes.number.isRequired,\r\n  followerCount: PropTypes.number.isRequired,\r\n  setFollowerCount: PropTypes.func.isRequired,\r\n  profile: PropTypes.shape({\r\n    docId: PropTypes.string,\r\n    userId: PropTypes.string,\r\n    following: PropTypes.array,\r\n    followers: PropTypes.array,\r\n    fullName: PropTypes.string,\r\n    username: PropTypes.string,\r\n  }).isRequired,\r\n};\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAANYAAADWCAYAAACt43wuAAAACXBIWXMAAC4jAAAuIwF4pT92AAAGWWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDggNzkuMTY0MDM2LCAyMDE5LzA4LzEzLTAxOjA2OjU3ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgMjEuMSAoV2luZG93cykiIHhtcDpDcmVhdGVEYXRlPSIyMDIxLTA3LTA1VDExOjI0OjQxLTA0OjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAyMS0wNy0wNVQxMTozOTowNS0wNDowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAyMS0wNy0wNVQxMTozOTowNS0wNDowMCIgZGM6Zm9ybWF0PSJpbWFnZS9wbmciIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJzUkdCIElFQzYxOTY2LTIuMSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozNGFkMDdhYS1jYzBiLTM5NDItYjAzYy1hMTFmODFjN2ZkYTUiIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDoyNWNiZTk3ZC1hODIxLTViNGItYWExOC03NzBiYmYyZGU1NmYiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDphYmIxZmUyZi1lNWFhLThlNDMtYjRlNi01OTI0MWNlNDVjZDMiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmFiYjFmZTJmLWU1YWEtOGU0My1iNGU2LTU5MjQxY2U0NWNkMyIgc3RFdnQ6d2hlbj0iMjAyMS0wNy0wNVQxMToyNDo0MS0wNDowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDIxLjEgKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjb252ZXJ0ZWQiIHN0RXZ0OnBhcmFtZXRlcnM9ImZyb20gYXBwbGljYXRpb24vdm5kLmFkb2JlLnBob3Rvc2hvcCB0byBpbWFnZS9wbmciLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjM0YWQwN2FhLWNjMGItMzk0Mi1iMDNjLWExMWY4MWM3ZmRhNSIgc3RFdnQ6d2hlbj0iMjAyMS0wNy0wNVQxMTozOTowNS0wNDowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDIxLjEgKFdpbmRvd3MpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PqD0V30AAAqISURBVHic7d3tcdvGGobhW2fyP3AHVAd0BaIriFxBqAoiVWC7AskViK7ASgWhKzA7EDswUoHOj6WOlROLInb3xYd5XzMezZDE7isLD3exBIGTh4cHJNX1n6ELkH5GBksKYLCkAAZLCmCw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\"","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport Skeleton from \"react-loading-skeleton\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nexport default function Photos({ photos }) {\r\n  return (\r\n    <div className=\"h-16 pt-4\">\r\n      <div className=\"grid grid-cols-3 gap-8 mt-4 mb-12\">\r\n        {!photos ? (\r\n          <>\r\n            <Skeleton count={12} width={320} height={400} />\r\n          </>\r\n        ) : photos.length > 0 ? (\r\n          photos.map((photo) => (\r\n            <div key={photo.docId}>\r\n              <Link to={`/post/${photo.docId}`}>\r\n                <div className=\"relative group\">\r\n                  <img src={photo.imageSrc} alt={photo.caption} />\r\n\r\n                  <div className=\"absolute bottom-0 left-0 bg-gray-200 z-10 w-full justify-evenly items-center h-full bg-black-faded group-hover:flex hidden\">\r\n                    <p className=\"flex items-center text-white font-bold\">\r\n                      <svg\r\n                        xmlns=\"http://www.w3.org/2000/svg\"\r\n                        viewBox=\"0 0 20 20\"\r\n                        fill=\"currentColor\"\r\n                        className=\"w-8 mr-4\"\r\n                      >\r\n                        <path\r\n                          fillRule=\"evenodd\"\r\n                          d=\"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z\"\r\n                          clipRule=\"evenodd\"\r\n                        />\r\n                      </svg>\r\n                      {photo.likes.length}\r\n                    </p>\r\n                    <p className=\"flex items-center text-white font-bold\">\r\n                      <svg\r\n                        xmlns=\"http://www.w3.org/2000/svg\"\r\n                        viewBox=\"0 0 20 20\"\r\n                        fill=\"currentColor\"\r\n                        className=\"w-8 mr-4\"\r\n                      >\r\n                        <path\r\n                          fillRule=\"evenodd\"\r\n                          d=\"M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z\"\r\n                          clipRule=\"evenodd\"\r\n                        />\r\n                      </svg>\r\n                      {photo.comments.length}\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              </Link>\r\n            </div>\r\n          ))\r\n        ) : null}\r\n      </div>\r\n      {!photos ||\r\n        (photos.length === 0 && (\r\n          <p className=\"text-center text-2xl\">No Posts Yet</p>\r\n        ))}\r\n      <br />\r\n      <br />\r\n    </div>\r\n  );\r\n}\r\n\r\nPhotos.propTypes = {\r\n  photos: PropTypes.array,\r\n};\r\n","import React from \"react\";\r\nimport Skeleton from \"react-loading-skeleton\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nexport default function Followers({ follows, title }) {\r\n  return (\r\n    <div className=\"flex flex-col justify-center m-auto items-center\">\r\n      <p className=\"text-center text-2xl m-3\">{title}</p>\r\n      {!follows ? (\r\n        <>\r\n          <div className=\"flex items-center justify-start w-64\">\r\n            <Skeleton count={12} width={256} height={64} className=\"m-1\" />\r\n          </div>\r\n        </>\r\n      ) : follows.length > 0 ? (\r\n        follows.map((user) => (\r\n          <div key={user.userId}>\r\n            <Link to={`/p/${user.username}`}>\r\n              <div className=\"flex items-center justify-start w-64 hover:bg-gray-primary bg-gray-light p-2 m-1 rounded\">\r\n                <img\r\n                  src={user.avatar}\r\n                  className=\"rounded-full h-12 w-12 flex mr-3 object-cover\"\r\n                  alt={`${user.username} avi`}\r\n                />\r\n                <div className=\"col-span-3\">\r\n                  <p className=\"text-sm font-bold\">{user.username}</p>\r\n                  <p className=\"text-sm text-gray-dark\">{user.fullName}</p>\r\n                </div>\r\n              </div>\r\n            </Link>\r\n          </div>\r\n        ))\r\n      ) : null}\r\n      {!follows ||\r\n        (follows.length === 0 && <p className=\"text-center text-2xl\">...</p>)}\r\n    </div>\r\n  );\r\n}\r\n","import React, { useReducer, useEffect, useState } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport ProfileHeader from \"./ProfileHeader\";\r\nimport Photos from \"./Photos\";\r\nimport Follows from \"./Follows\";\r\nimport { getUserPhotosByUsername } from \"../../services/firebase\";\r\nimport useFollowing from \"../../hooks/use-following\";\r\nimport useFollowers from \"../../hooks/use-followers\";\r\n\r\nexport default function UserProfile({ user }) {\r\n  const reducer = (state, newState) => ({ ...state, ...newState });\r\n  const [showPhotos, setShowPhotos] = useState(true);\r\n  const [showFollowers, setShowFollowers] = useState(false);\r\n  const [showFollowing, setShowFollowing] = useState(false);\r\n  const { following } = useFollowing(user);\r\n  const { followers } = useFollowers(user);\r\n\r\n  const handleShowPhotos = () => {\r\n    setShowPhotos(true);\r\n    setShowFollowers(false);\r\n    setShowFollowing(false);\r\n  };\r\n\r\n  useEffect(() => {\r\n    handleShowPhotos();\r\n  }, [user]);\r\n\r\n  const handleShowFollowers = () => {\r\n    setShowPhotos(false);\r\n    setShowFollowers(true);\r\n    setShowFollowing(false);\r\n  };\r\n\r\n  const handleShowFollowing = () => {\r\n    setShowPhotos(false);\r\n    setShowFollowers(false);\r\n    setShowFollowing(true);\r\n  };\r\n\r\n  const initialState = {\r\n    profile: {},\r\n    photosCollection: null,\r\n    followerCount: 0,\r\n  };\r\n\r\n  const [{ profile, photosCollection, followerCount }, dispatch] = useReducer(\r\n    reducer,\r\n    initialState\r\n  );\r\n\r\n  useEffect(() => {\r\n    async function getProfileInfoAndPhotos() {\r\n      const photos = await getUserPhotosByUsername(user.username);\r\n      let followersCount = 0;\r\n      if (user.followers === undefined) {\r\n      } else {\r\n        followersCount = user.followers.length;\r\n      }\r\n\r\n      dispatch({\r\n        profile: user,\r\n        photosCollection: photos.sort((a, b) => b.dateCreated - a.dateCreated),\r\n        followerCount: followersCount,\r\n      });\r\n    }\r\n\r\n    if (user.username) {\r\n      getProfileInfoAndPhotos();\r\n    }\r\n  }, [user]);\r\n\r\n  return (\r\n    <>\r\n      <ProfileHeader\r\n        photosCount={photosCollection ? photosCollection.length : 0}\r\n        profile={profile}\r\n        followerCount={followerCount}\r\n        setFollowerCount={dispatch}\r\n        handleShowFollowers={handleShowFollowers}\r\n        handleShowFollowing={handleShowFollowing}\r\n        handleShowPhotos={handleShowPhotos}\r\n      />\r\n      {showPhotos && <Photos photos={photosCollection} />}\r\n      {showFollowers && <Follows follows={followers} title={\"Followers\"} />}\r\n      {showFollowing && <Follows follows={following} title={\"Following\"} />}\r\n    </>\r\n  );\r\n}\r\n\r\nUserProfile.propTypes = {\r\n  user: PropTypes.shape({\r\n    dateCreated: PropTypes.number.isRequired,\r\n    emailAddress: PropTypes.string.isRequired,\r\n    followers: PropTypes.array.isRequired,\r\n    following: PropTypes.array.isRequired,\r\n    fullName: PropTypes.string.isRequired,\r\n    userId: PropTypes.string.isRequired,\r\n    username: PropTypes.string.isRequired,\r\n  }),\r\n};\r\n","import { useState, useEffect } from \"react\";\r\nimport { getUserByUserId, getFollowingOrFollowers } from \"../services/firebase\";\r\n\r\nexport default function useFollowing(user) {\r\n  const [following, setFollowing] = useState(null);\r\n\r\n  useEffect(() => {\r\n    async function fetchFollowing() {\r\n      const [{ following }] = await getUserByUserId(user.userId);\r\n      let followingArray = [];\r\n\r\n      if (following.length > 0) {\r\n        followingArray = await getFollowingOrFollowers(following);\r\n      }\r\n\r\n      setFollowing(followingArray);\r\n    }\r\n\r\n    fetchFollowing();\r\n  }, [user]);\r\n\r\n  return { following };\r\n}\r\n","import { useState, useEffect } from \"react\";\r\nimport { getUserByUserId, getFollowingOrFollowers } from \"../services/firebase\";\r\n\r\nexport default function useFollowers(user) {\r\n  const [followers, setFollowers] = useState(null);\r\n\r\n  useEffect(() => {\r\n    async function fetchFollowers() {\r\n      const [{ followers }] = await getUserByUserId(user.userId);\r\n      let followersArray = [];\r\n\r\n      if (followers === undefined) {\r\n        followersArray = [];\r\n      } else if (followers.length > 0) {\r\n        followersArray = await getFollowingOrFollowers(followers);\r\n      }\r\n\r\n      setFollowers(followersArray);\r\n    }\r\n\r\n    fetchFollowers();\r\n  }, [user]);\r\n\r\n  return { followers };\r\n}\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { useParams, useHistory } from \"react-router-dom\";\r\nimport { getUserByUsername } from \"../services/firebase\";\r\nimport * as ROUTES from \"../constants/routes\";\r\nimport Header from \"../components/Header\";\r\nimport UserProfile from \"../components/profile/UserProfile\";\r\n\r\nexport default function Profile() {\r\n  const { username } = useParams();\r\n  const [user, setUser] = useState(null);\r\n  const history = useHistory();\r\n\r\n  useEffect(() => {\r\n    async function checkUserExists() {\r\n      const [doesUserExist] = await getUserByUsername(username);\r\n      if (doesUserExist.userId) {\r\n        setUser(doesUserExist);\r\n      } else {\r\n        history.push(ROUTES.NOT_FOUND);\r\n      }\r\n    }\r\n\r\n    checkUserExists();\r\n  }, [username, history]);\r\n\r\n  return user?.username ? (\r\n    <div className=\"bg-gray-background\">\r\n      <Header />\r\n      <div className=\"mx-auto max-w-screen-lg\">\r\n        <UserProfile user={user} />\r\n      </div>\r\n    </div>\r\n  ) : null;\r\n}\r\n"],"sourceRoot":""}