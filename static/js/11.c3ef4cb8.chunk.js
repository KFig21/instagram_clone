(this.webpackJsonpinstagram_clone=this.webpackJsonpinstagram_clone||[]).push([[11],{60:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var c=n(53),a=n.n(c),s=n(54),r=n(30),i=n(1),l=n(18),o=n(55),u=n(13),d=n(5),j=n(56),b=n(4);function h(e){var t=e.userId,n=e.docId,c=e.photoStorageName,h=e.page,m=Object(i.useState)(""),f=Object(r.a)(m,2),x=f[0],p=f[1],O=Object(i.useState)(!1),g=Object(r.a)(O,2),v=g[0],y=g[1],w=Object(j.a)().userInfo,N=Object(d.g)();Object(i.useEffect)((function(){function e(){return(e=Object(s.a)(a.a.mark((function e(){var n,c,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(o.i)(t);case 2:n=e.sent,c=Object(r.a)(n,1),(s=c[0]).userId?p(s):N.push(u.c);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t,N]);return Object(b.jsx)("div",{className:"flex border-b border-gray-primary h-4 p-4 py-8",children:Object(b.jsxs)("div",{className:"flex items-center justify-between w-full",children:[Object(b.jsxs)(l.b,{to:"/p/".concat(x.username),className:"flex items-center",children:[Object(b.jsx)("img",{src:x.avatar,className:"rounded-full h-8 w-8 flex mr-3 object-cover",alt:"".concat(x.username," avi")}),Object(b.jsx)("p",{className:"font-bold",children:x.username})]}),Object(b.jsxs)("div",{className:"flex justify-center items-center",children:[v&&Object(b.jsx)("button",{onClick:function(){console.log(n),Object(o.b)(n,c),setTimeout((function(){window.location.reload()}),500)},className:"hover:bg-red-primary hover:text-white font-bold h-5/6 px-2 py-1 rounded mr-6 duration-150",title:"confirm delete",children:"delete?"}),w.userId===x.userId&&"post"===h&&Object(b.jsx)("p",{className:"font-bold text-4xl hover:text-red-primary mb-2 cursor-pointer duration-150 ".concat(v?"hover:text-green-primary":"hover:text-red-primary"),onClick:function(){y(!v)},title:v?"cancel delete":"delete your post",children:"\xd7"})]})]})})}},73:function(e,t,n){},87:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return N}));var c=n(30),a=n(1),s=n(5),r=n(61),i=n(53),l=n.n(i),o=n(54),u=n(79),d=function(e){return new Promise((function(t,n){var c=new Image;c.addEventListener("load",(function(){return t(c)})),c.addEventListener("error",(function(e){return n(e)})),c.setAttribute("crossOrigin","anonymous"),c.src=e}))};function j(e){return e*Math.PI/180}function b(e,t){return h.apply(this,arguments)}function h(){return(h=Object(o.a)(l.a.mark((function e(t,n){var c,a,s,r,i,o,u,b=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=b.length>2&&void 0!==b[2]?b[2]:0,e.next=3,d(t);case 3:return a=e.sent,s=document.createElement("canvas"),r=s.getContext("2d"),i=Math.max(a.width,a.height),o=i/2*Math.sqrt(2)*2,s.width=o,s.height=o,r.translate(o/2,o/2),r.rotate(j(c)),r.translate(-o/2,-o/2),r.drawImage(a,o/2-.5*a.width,o/2-.5*a.height),u=r.getImageData(0,0,o,o),s.width=n.width,s.height=n.height,r.putImageData(u,Math.round(0-o/2+.5*a.width-n.x),Math.round(0-o/2+.5*a.height-n.y)),e.abrupt("return",s.toDataURL("image/jpeg"));case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}n(73);var m=n(4);function f(e){var t=e.selectedImage,n=e.handleImage,s=e.handleEditingCancel,r=e.handleEditingContinue,i=e.handleFinishEditingContinue,d=Object(a.useState)({x:0,y:0}),j=Object(c.a)(d,2),h=j[0],f=j[1],x=Object(a.useState)(1),p=Object(c.a)(x,2),O=p[0],g=p[1],v=Object(a.useState)(null),y=Object(c.a)(v,2),w=y[0],N=y[1],C=Object(a.useCallback)((function(e,t){N(t)}),[]),I=Object(a.useCallback)(Object(o.a)(l.a.mark((function e(){var c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r(),e.next=4,b(t,w);case 4:c=e.sent,n(c),i(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])}))),[i,r,n,t,w]);return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:"border border-gray-primary mt-12",style:{position:"relative",height:"65vh",width:"100vh"},children:Object(m.jsx)(u.a,{image:t,crop:h,zoom:O,aspect:1,onCropChange:f,onCropComplete:C,onZoomChange:g})}),Object(m.jsxs)("div",{className:"w-full mt-5 flex flex-col justify-center items-center",children:[Object(m.jsx)("input",{type:"range",value:O,min:1,max:10,step:.1,"aria-labelledby":"Zoom",onChange:function(e){g(e.target.value)},className:"slider"}),Object(m.jsx)("span",{className:"mt-2",children:"Zoom"})]}),Object(m.jsx)("div",{className:"h-16 bg-white border-t border-gray-primary absolute inset-x-0 bottom-0 justify-center",children:Object(m.jsxs)("div",{className:"flex w-3/5 h-full items-center justify-around m-auto",children:[Object(m.jsx)("button",{className:"bg-blue-primary font-bold text-sm rounded text-white w-20 h-8",onClick:s,children:"Cancel"}),Object(m.jsx)("button",{className:"bg-blue-primary font-bold text-sm rounded text-white w-20 h-8",onClick:I,children:"Continue"})]})})]})}var x=n(56),p=n(33),O=n(13),g=n(60),v=n(55);function y(e){var t=e.selectedImage,n=e.handleFinishEditingCancel,r=e.fileName,i=e.type,l=Object(a.useState)(""),o=Object(c.a)(l,2),u=o[0],d=o[1],j=Object(a.useState)(!1),b=Object(c.a)(j,2),h=b[0],f=b[1],y=Object(x.a)().userInfo,w=Object(p.a)().user;return Object(m.jsxs)("div",{className:"flex flex-col items-center w-full h-full justify-center ",children:[y.username===w.displayName&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{className:"rounded col-span-4 border border-gray-primary bg-white",children:[Object(m.jsx)(g.a,{userId:y.userId,page:"edit"}),Object(m.jsx)("div",{className:"flex items-center justify-center outline-none h-full max-w-sm max-h-sm",children:Object(m.jsx)("img",{className:"w-full cursor-pointer",src:t,alt:"The chosen, cropped post"})}),"post"===i&&Object(m.jsx)("form",{className:"flex flex-row place-items-center justify-evenly h-auto",children:Object(m.jsx)("textarea",{className:"outline-none w-full p-2",placeholder:"Write a caption...",onChange:function(e){var t=e.currentTarget.value;t.length<2200&&d(t)},"ng-trim":!1,type:"text"})})]}),Object(m.jsx)("div",{className:"h-16 bg-white border-t border-gray-primary absolute inset-x-0 bottom-0 justify-center",children:Object(m.jsxs)("div",{className:"flex w-3/5 h-full items-center justify-around m-auto",children:[Object(m.jsx)("button",{className:"bg-blue-primary font-bold text-sm rounded text-white w-20 h-8",onClick:n,children:"Back"}),Object(m.jsx)("button",{className:"bg-blue-primary font-bold text-sm rounded text-white w-20 h-8",onClick:"post"===i?function(){Object(v.m)(y,t,u,r),setTimeout((function(){f(!0)}),2e3)}:function(){Object(v.q)(y,t,r),setTimeout((function(){f(!0)}),2e3)},children:"post"===i?"Post":"Confirm"})]})})]}),h&&Object(m.jsx)(s.a,{to:O.a})]})}function w(e){var t=e.type,n=Object(a.useState)(""),s=Object(c.a)(n,2),r=s[0],i=s[1],l=Object(a.useState)(!1),o=Object(c.a)(l,2),u=o[0],d=o[1],j=Object(a.useState)(!1),b=Object(c.a)(j,2),h=b[0],x=b[1],p=Object(a.useState)(!1),O=Object(c.a)(p,2),g=O[0],v=O[1],w=Object(a.useState)(""),N=Object(c.a)(w,2),C=N[0],I=N[1];return Object(m.jsxs)("div",{className:"flex items-center justify-center w-full",children:[!u&&!h&&!g&&Object(m.jsx)("div",{className:"p-24 shadow-lg bg-white outline-none",style:{zIndex:"5"},children:Object(m.jsxs)("label",{children:[Object(m.jsx)("div",{className:"flex items-center justify-center ",children:Object(m.jsxs)("svg",{version:"1.1",id:"Capa_1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 490.2 490.2",className:"w-24 text-black-light cursor-pointer",children:[Object(m.jsx)("path",{d:"M418.5,418.5c95.6-95.6,95.6-251.2,0-346.8s-251.2-95.6-346.8,0s-95.6,251.2,0,346.8S322.9,514.1,418.5,418.5z M89,89\r c86.1-86.1,226.1-86.1,312.2,0s86.1,226.1,0,312.2s-226.1,86.1-312.2,0S3,175.1,89,89z"}),Object(m.jsx)("path",{d:"M245.1,336.9c3.4,0,6.4-1.4,8.7-3.6c2.2-2.2,3.6-5.3,3.6-8.7v-67.3h67.3c3.4,0,6.4-1.4,8.7-3.6c2.2-2.2,3.6-5.3,3.6-8.7\r c0-6.8-5.5-12.3-12.2-12.2h-67.3v-67.3c0-6.8-5.5-12.3-12.2-12.2c-6.8,0-12.3,5.5-12.2,12.2v67.3h-67.3c-6.8,0-12.3,5.5-12.2,12.2\r c0,6.8,5.5,12.3,12.2,12.2h67.3v67.3C232.8,331.4,238.3,336.9,245.1,336.9z"})]})}),Object(m.jsx)("input",{style:{display:"none"},type:"file",name:"file",accept:"image/*",onChange:function(e){var t=e.target.files[0];console.log("file",t);var n=URL.createObjectURL(t);I(t.name),i(n),x(!h),d(!u)}}),Object(m.jsx)("div",{className:"flex items-end justify-evenly bg-none font-semibold cursor-pointer outline-none p-4",children:"Choose image to upload"})]})}),r&&!g&&h&&u&&Object(m.jsx)("div",{style:{zIndex:"5"},children:Object(m.jsx)(f,{selectedImage:r,handleImage:function(e){i(e)},handleEditingCancel:function(){x(!h),d(!u)},handleEditingContinue:function(){x(!h)},handleFinishEditingContinue:function(){v(!g)}})}),g&&u&&Object(m.jsx)("div",{style:{zIndex:"5"},children:Object(m.jsx)(y,{selectedImage:r,handleFinishEditingCancel:function(){v(!g),x(!h)},fileName:C,type:t})}),Object(m.jsx)("p",{className:"absolute",style:{zIndex:"1"},children:"loading... (possibly)"})]})}function N(){var e=Object(a.useState)(""),t=Object(c.a)(e,2),n=t[0],i=t[1],l=Object(s.h)();return Object(a.useEffect)((function(){i(l.state.type)}),[l.state.type,n]),Object(m.jsxs)("div",{className:"bg-gray-background",children:[Object(m.jsx)(r.a,{}),Object(m.jsx)("div",{className:"mx-auto max-w-screen-lg justify-center items-center flex",style:{height:"75vh"},children:Object(m.jsx)(w,{type:n})})]})}}}]);
//# sourceMappingURL=11.c3ef4cb8.chunk.js.map