{"version":3,"sources":["components/post/Header.js","hooks/use-photos.js","components/post/Actions.js","components/post/Footer.js","components/post/AddComment.js","components/post/Comments.js","components/post/Image.js","components/post/Post.js","components/Timeline.js","components/sidebar/User.js","components/sidebar/SuggestedProfile.js","components/sidebar/Suggestions.js","components/sidebar/Sidebar.js","pages/Dashboard.js"],"names":["Header","userId","docId","photoStorageName","page","useState","postUser","setPostUser","deletePostButton","setDeletePostButton","userInfo","useUser","history","useHistory","useEffect","a","getUserByUserId","doesUserExist","push","ROUTES","checkUserExists","className","to","username","src","avatar","alt","onClick","console","log","deletePostById","setTimeout","window","location","reload","title","usePhotos","photos","setPhotos","user","useContext","UserContext","uid","following","followedUserPhotos","undefined","length","getPhotos","displayName","sort","b","dateCreated","getTimelinePhotos","Actions","totalLikes","likedPhoto","handleFocus","toggleLiked","setToggleLiked","likes","setLikes","FirebaseContext","firebase","FieldValue","handleToggleLiked","firestore","collection","doc","update","arrayRemove","arrayUnion","onKeyDown","event","key","xmlns","fill","viewBox","stroke","tabIndex","strokeLinecap","strokeLinejoin","strokeWidth","d","Footer","caption","AddComment","comments","setComments","commentInput","comment","setComment","handleSubmitComment","e","preventDefault","commentId","uniqid","photoDocId","userDocId","method","onSubmit","autoComplete","type","name","placeholder","value","onChange","target","ref","disabled","Comments","allComments","posted","commentToDelete","setCommentToDelete","maxComments","handleY","deleteCommentByCommentId","handleN","slice","map","item","formatDistance","Date","Image","Post","content","useRef","imageSrc","userLikedPhoto","current","focus","Timeline","count","width","height","User","fullName","SuggestedProfile","profileDocId","loggedInUserDocId","profileId","followed","setFollowed","updateLoggedInUserFollowing","updateFollowedUserFollowers","Suggestions","profiles","setProfiles","getSuggestedProfiles","response","suggestedProfiles","profile","Sidebar","Dashboard","document"],"mappings":"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","file":"static/js/8.d42ebcff.chunk.js","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport PropTypes from \"prop-types\";\r\nimport { getUserByUserId, deletePostById } from \"../../services/firebase\";\r\nimport * as ROUTES from \"../../constants/routes\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport useUser from \"../../hooks/use-user\";\r\n\r\nexport default function Header({ userId, docId, photoStorageName, page }) {\r\n  const [postUser, setPostUser] = useState(\"\");\r\n  const [deletePostButton, setDeletePostButton] = useState(false);\r\n  const { userInfo } = useUser();\r\n  const history = useHistory();\r\n\r\n  useEffect(() => {\r\n    async function checkUserExists() {\r\n      const [doesUserExist] = await getUserByUserId(userId);\r\n      if (doesUserExist.userId) {\r\n        setPostUser(doesUserExist);\r\n      } else {\r\n        history.push(ROUTES.NOT_FOUND);\r\n      }\r\n    }\r\n\r\n    checkUserExists();\r\n  }, [userId, history]);\r\n\r\n  const handleX = () => {\r\n    setDeletePostButton(!deletePostButton);\r\n  };\r\n\r\n  const handleDelete = () => {\r\n    console.log(docId);\r\n    deletePostById(docId, photoStorageName);\r\n    setTimeout(function () {\r\n      window.location.reload();\r\n    }, 500);\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex border-b border-gray-primary h-4 p-4 py-8\">\r\n      <div className=\"flex items-center justify-between w-full\">\r\n        <Link to={`/p/${postUser.username}`} className=\"flex items-center\">\r\n          <img\r\n            src={postUser.avatar}\r\n            className=\"rounded-full h-8 w-8 flex mr-3 object-cover\"\r\n            alt={`${postUser.username} avi`}\r\n          />\r\n          <p className=\"font-bold\">{postUser.username}</p>\r\n        </Link>\r\n        <div className=\"flex justify-center items-center\">\r\n          {deletePostButton && (\r\n            <button\r\n              onClick={handleDelete}\r\n              className=\"hover:bg-red-primary hover:text-white font-bold h-5/6 px-2 py-1 rounded mr-6 duration-150\"\r\n              title=\"confirm delete\"\r\n            >\r\n              delete?\r\n            </button>\r\n          )}\r\n          {userInfo.userId === postUser.userId && page === \"post\" && (\r\n            <p\r\n              className={`font-bold text-4xl hover:text-red-primary mb-2 cursor-pointer duration-150 ${\r\n                deletePostButton\r\n                  ? `hover:text-green-primary`\r\n                  : `hover:text-red-primary`\r\n              }`}\r\n              onClick={handleX}\r\n              title={deletePostButton ? \"cancel delete\" : \"delete your post\"}\r\n            >\r\n              ×\r\n            </p>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nHeader.propTypes = {\r\n  username: PropTypes.string,\r\n  docId: PropTypes.string,\r\n  photoStorageName: PropTypes.string.isRequired,\r\n  page: PropTypes.string.isRequired,\r\n};\r\n","import { useState, useEffect, useContext } from \"react\";\r\nimport UserContext from \"../context/user\";\r\nimport { getUserByUserId, getPhotos } from \"../services/firebase\";\r\nimport { useHistory } from \"react-router\";\r\n\r\nexport default function usePhotos() {\r\n  const [photos, setPhotos] = useState(null);\r\n  const { user } = useContext(UserContext);\r\n  const history = useHistory();\r\n\r\n  useEffect(() => {\r\n    async function getTimelinePhotos() {\r\n      const [{ following }] = await getUserByUserId(user.uid);\r\n      let followedUserPhotos = [];\r\n\r\n      if (following === undefined) {\r\n        followedUserPhotos = [];\r\n      } else if (following.length > 0) {\r\n        followedUserPhotos = await getPhotos(\r\n          user.uid,\r\n          following,\r\n          user.displayName\r\n        );\r\n      }\r\n\r\n      followedUserPhotos.sort((a, b) => b.dateCreated - a.dateCreated);\r\n      setPhotos(followedUserPhotos);\r\n    }\r\n\r\n    if (user !== null) {\r\n      getTimelinePhotos();\r\n    } else {\r\n      history.push(\"/login\");\r\n    }\r\n  }, [user, history]);\r\n\r\n  return { photos };\r\n}\r\n","import { useState, useContext } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport FirebaseContext from \"../../context/firebase\";\r\nimport UserContext from \"../../context/user\";\r\nimport useUser from \"../../hooks/use-user\";\r\n\r\nexport default function Actions({\r\n  docId,\r\n  totalLikes,\r\n  likedPhoto,\r\n  handleFocus,\r\n}) {\r\n  const { user } = useContext(UserContext);\r\n  const { userInfo } = useUser();\r\n  const [toggleLiked, setToggleLiked] = useState(likedPhoto);\r\n  const [likes, setLikes] = useState(totalLikes);\r\n  const { firebase, FieldValue } = useContext(FirebaseContext);\r\n\r\n  const handleToggleLiked = async () => {\r\n    setToggleLiked((toggleLiked) => !toggleLiked);\r\n\r\n    await firebase\r\n      .firestore()\r\n      .collection(\"photos\")\r\n      .doc(docId)\r\n      .update({\r\n        likes: toggleLiked\r\n          ? FieldValue.arrayRemove(user.uid)\r\n          : FieldValue.arrayUnion(user.uid),\r\n      });\r\n    console.log(userInfo.docId);\r\n    console.log(docId);\r\n    await firebase\r\n      .firestore()\r\n      .collection(\"users\")\r\n      .doc(userInfo.docId)\r\n      .update({\r\n        likes: toggleLiked\r\n          ? FieldValue.arrayRemove(docId)\r\n          : FieldValue.arrayUnion(docId),\r\n      });\r\n\r\n    setLikes((likes) => (toggleLiked ? likes - 1 : likes + 1));\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className=\"flex justify-between p-4\">\r\n        <div className=\"flex\">\r\n          <svg\r\n            onClick={handleToggleLiked}\r\n            onKeyDown={(event) => {\r\n              if (event.key === \"Enter\") {\r\n                handleToggleLiked();\r\n              }\r\n            }}\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            fill=\"none\"\r\n            viewBox=\"0 0 24 24\"\r\n            stroke=\"currentColor\"\r\n            tabIndex={0}\r\n            className={`w-8 mr-4 select-none cursor-pointer focus:outline-none hover:text-red-primary duration-200 ${\r\n              toggleLiked ? \"fill-red text-red-primary\" : \"text-black-light\"\r\n            }`}\r\n          >\r\n            <path\r\n              strokeLinecap=\"round\"\r\n              strokeLinejoin=\"round\"\r\n              strokeWidth={2}\r\n              d=\"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z\"\r\n            />\r\n          </svg>\r\n          <svg\r\n            onClick={handleFocus}\r\n            onKeyDown={(event) => {\r\n              if (event.key === \"Enter\") {\r\n                handleFocus();\r\n              }\r\n            }}\r\n            className=\"w-8 text-black-light select-none cursor-pointer focus:outline-none\"\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            fill=\"none\"\r\n            viewBox=\"0 0 24 24\"\r\n            stroke=\"currentColor\"\r\n            tabIndex={0}\r\n          >\r\n            <path\r\n              strokeLinecap=\"round\"\r\n              strokeLinejoin=\"round\"\r\n              strokeWidth={2}\r\n              d=\"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z\"\r\n            />\r\n          </svg>\r\n        </div>\r\n      </div>\r\n      <div className=\"p-4 py-0\">\r\n        <p className=\"font-bold\">\r\n          {likes === 1 ? `${likes} like` : `${likes} likes`}\r\n        </p>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nActions.propTypes = {\r\n  docId: PropTypes.string.isRequired,\r\n  totalLikes: PropTypes.number.isRequired,\r\n  likedPhoto: PropTypes.bool.isRequired,\r\n  handleFocus: PropTypes.func.isRequired,\r\n};\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nexport default function Footer({ caption, username }) {\r\n  return (\r\n    <div className=\"p-4 pt-2 pb-0\">\r\n      <Link to={`/p/${username}`}>\r\n        <span className=\"mr-2 font-bold\">{username}</span>\r\n      </Link>\r\n      <span className=\"\">{caption}</span>\r\n    </div>\r\n  );\r\n}\r\n\r\nFooter.propTypes = {\r\n  caption: PropTypes.string.isRequired,\r\n  username: PropTypes.string.isRequired,\r\n};\r\n","import { useState, useContext } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport FirebaseContext from \"../../context/firebase\";\r\nimport UserContext from \"../../context/user\";\r\nimport uniqid from \"uniqid\";\r\nimport useUser from \"../../hooks/use-user\";\r\n\r\nexport default function AddComment({\r\n  docId,\r\n  comments,\r\n  setComments,\r\n  commentInput,\r\n}) {\r\n  const [comment, setComment] = useState(\"\");\r\n  const { firebase, FieldValue } = useContext(FirebaseContext);\r\n  const { user } = useContext(UserContext);\r\n  const { userInfo } = useUser();\r\n\r\n  const handleSubmitComment = async (e) => {\r\n    e.preventDefault();\r\n\r\n    setComments([{ displayName: user.displayName, comment }, ...comments]);\r\n    setComment(\"\");\r\n\r\n    const commentId = uniqid();\r\n\r\n    // add comment to user collection\r\n    firebase\r\n      .firestore()\r\n      .collection(\"users\")\r\n      .doc(userInfo.docId)\r\n      .update({\r\n        comments: FieldValue.arrayUnion({\r\n          photoDocId: docId,\r\n          comment,\r\n          commentId,\r\n        }),\r\n      });\r\n\r\n    // add comment to photo collection\r\n    return firebase\r\n      .firestore()\r\n      .collection(\"photos\")\r\n      .doc(docId)\r\n      .update({\r\n        comments: FieldValue.arrayUnion({\r\n          displayName: user.displayName,\r\n          comment,\r\n          userId: user.uid,\r\n          commentId,\r\n          userDocId: userInfo.docId,\r\n        }),\r\n      });\r\n  };\r\n\r\n  return (\r\n    <div className=\"border-t border-gray-primary bg-white absolute inset-x-0 bottom-0 justify-center \">\r\n      <form\r\n        className=\"flex justify-between pl-0 pr-5 \"\r\n        method=\"post\"\r\n        onSubmit={(e) =>\r\n          comment.length >= 1 ? handleSubmitComment(e) : e.preventDefault()\r\n        }\r\n      >\r\n        <input\r\n          aria-label=\"Add a comment\"\r\n          autoComplete=\"off\"\r\n          className=\"text-sm text-gray-base w-full mr-3 py-5 px-4\"\r\n          type=\"text\"\r\n          name=\"add-comment\"\r\n          placeholder=\"Add a comment\"\r\n          value={comment}\r\n          onChange={({ target }) => setComment(target.value)}\r\n          ref={commentInput}\r\n        />\r\n        <button\r\n          className={`text-sm font-bold text-blue-primary ${\r\n            !comment && \"opacity-25\"\r\n          }`}\r\n          type=\"button\"\r\n          disabled={comment.length < 1}\r\n          onClick={handleSubmitComment}\r\n        >\r\n          Post\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nAddComment.propTypes = {\r\n  docId: PropTypes.string.isRequired,\r\n  comments: PropTypes.array.isRequired,\r\n  setComments: PropTypes.func.isRequired,\r\n  commentInput: PropTypes.object.isRequired,\r\n};\r\n","import { useState } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { formatDistance } from \"date-fns\";\r\nimport { Link } from \"react-router-dom\";\r\nimport AddComment from \"./AddComment\";\r\nimport useUser from \"../../hooks/use-user\";\r\nimport { deleteCommentByCommentId } from \"../../services/firebase\";\r\n\r\nexport default function Comments({\r\n  docId,\r\n  comments: allComments,\r\n  posted,\r\n  commentInput,\r\n  page,\r\n}) {\r\n  const [comments, setComments] = useState(allComments);\r\n  const { userInfo } = useUser();\r\n  const [deletePostButton, setDeletePostButton] = useState(false);\r\n  const [commentToDelete, setCommentToDelete] = useState(\"\");\r\n  let maxComments = 3;\r\n  if (page === \"post\") {\r\n    maxComments = comments.length;\r\n  }\r\n\r\n  // sets the comment that the user wants to delete, shows confirmation 'y n'\r\n  function handleX(comment) {\r\n    setCommentToDelete(comment);\r\n    setDeletePostButton(!deletePostButton);\r\n  }\r\n\r\n  // deletes the comment from the database, refreshes the page\r\n  function handleY() {\r\n    deleteCommentByCommentId(docId, allComments, commentToDelete, userInfo);\r\n    setDeletePostButton(!deletePostButton);\r\n    setTimeout(function () {\r\n      window.location.reload();\r\n    }, 500);\r\n  }\r\n\r\n  // closes the delete options\r\n  function handleN() {\r\n    setDeletePostButton(!deletePostButton);\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div className=\"p-4 pt-1 pb-4 mb-14\">\r\n        {comments.length >= 3 && page === \"timeline\" && (\r\n          <Link to={`/post/${docId}`}>\r\n            <p className=\"text-sm text-gray-base mb-1 cursor-pointer\">\r\n              View all comments\r\n            </p>\r\n          </Link>\r\n        )}\r\n        {comments.slice(0, maxComments).map((item) => (\r\n          <div\r\n            key={`${item.comment}-${item.displayName}`}\r\n            className=\"mb-1 flex flex-row justify-between\"\r\n          >\r\n            <div>\r\n              <Link to={`/p/${item.displayName}`}>\r\n                <span className=\"mr-2 font-bold\">{item.displayName}</span>\r\n              </Link>\r\n              <span>{item.comment}</span>\r\n            </div>\r\n            <div className=\"flex flex-col\">\r\n              {/* if this is the logged in users comment, show the 'x' button to start the deletion process */}\r\n              {userInfo.userId === item.userId && !deletePostButton && (\r\n                <p\r\n                  className=\"font-bold text-xl hover:text-red-primary cursor-pointer duration-150 leading-5\"\r\n                  title={\"delete your comment\"}\r\n                  onClick={() => {\r\n                    handleX(item.commentId);\r\n                  }}\r\n                >\r\n                  ×\r\n                </p>\r\n              )}\r\n              {/* if the logged in use clicks 'x' allow them to confirm their deletion with 'y n' */}\r\n              {deletePostButton && commentToDelete === item.commentId && (\r\n                <div className=\"flex flex-row\">\r\n                  {/* delete comment */}\r\n                  <p\r\n                    className=\"font-bold text-xs hover:text-red-primary cursor-pointer duration-150 leading-loose mr-2\"\r\n                    onClick={handleY}\r\n                    title={\"confirm delete\"}\r\n                  >\r\n                    y\r\n                  </p>\r\n                  {/* don't delete comment */}\r\n                  <p\r\n                    className=\"font-bold text-xs hover:text-green-primary cursor-pointer duration-150 leading-loose\"\r\n                    onClick={handleN}\r\n                    title={\"cancel delete\"}\r\n                  >\r\n                    n\r\n                  </p>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        ))}\r\n        <p className=\"text-gray-base uppercase text-xs mt-2\">\r\n          {formatDistance(posted, new Date())} ago\r\n        </p>\r\n      </div>\r\n      <AddComment\r\n        docId={docId}\r\n        comments={comments}\r\n        setComments={setComments}\r\n        commentInput={commentInput}\r\n      />\r\n    </>\r\n  );\r\n}\r\n\r\nComments.propTypes = {\r\n  docId: PropTypes.string.isRequired,\r\n  comments: PropTypes.array.isRequired,\r\n  posted: PropTypes.number.isRequired,\r\n  commentInput: PropTypes.object.isRequired,\r\n};\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nexport default function Image({ src, caption }) {\r\n  return <img src={src} alt={caption} />;\r\n}\r\n\r\nImage.propTypes = {\r\n  src: PropTypes.string.isRequired,\r\n  caption: PropTypes.string.isRequired,\r\n};\r\n","import { useRef } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport Header from \"./Header\";\r\nimport Image from \"./Image\";\r\nimport Actions from \"./Actions\";\r\nimport Footer from \"./Footer\";\r\nimport Comments from \"./Comments\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nexport default function Post({ content }) {\r\n  const commentInput = useRef(null);\r\n  const handleFocus = () => commentInput.current.focus();\r\n  const docId = content.docId;\r\n\r\n  return (\r\n    <div className=\"rounded col-span-4 border border-gray-primary bg-white mt-4 mb-2 relative\">\r\n      <Header\r\n        userId={content.userId}\r\n        docId={content.docId}\r\n        photoStorageName={content.photoStorageName}\r\n        page=\"post\"\r\n      />\r\n      <Link to={`/post/${docId}`}>\r\n        <Image src={content.imageSrc} caption={content.caption} />\r\n      </Link>\r\n      <Actions\r\n        docId={content.docId}\r\n        totalLikes={content.likes.length}\r\n        likedPhoto={content.userLikedPhoto}\r\n        handleFocus={handleFocus}\r\n      />\r\n      <Footer username={content.username} caption={content.caption} />\r\n      <Comments\r\n        docId={content.docId}\r\n        comments={content.comments}\r\n        posted={content.dateCreated}\r\n        commentInput={commentInput}\r\n        page=\"timeline\"\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nPost.propTypes = {\r\n  content: PropTypes.shape({\r\n    username: PropTypes.string.isRequired,\r\n    imageSrc: PropTypes.string.isRequired,\r\n    caption: PropTypes.string.isRequired,\r\n    docId: PropTypes.string.isRequired,\r\n    userLikedPhoto: PropTypes.bool.isRequired,\r\n    likes: PropTypes.array.isRequired,\r\n    comments: PropTypes.array.isRequired,\r\n    dateCreated: PropTypes.number.isRequired,\r\n  }),\r\n};\r\n","import React from \"react\";\r\nimport Skeleton from \"react-loading-skeleton\";\r\nimport usePhotos from \"../hooks/use-photos\";\r\nimport Post from \"./post/Post\";\r\n\r\nexport default function Timeline() {\r\n  // get the logged in user's photos\r\n  const { photos } = usePhotos();\r\n\r\n  return (\r\n    <div className=\"container col-span-2\">\r\n      {!photos ? (\r\n        <>\r\n          <Skeleton count={4} width={500} height={500} className=\"mt-6\" />\r\n        </>\r\n      ) : photos?.length > 0 ? (\r\n        photos.map((content) => <Post key={content.docId} content={content} />)\r\n      ) : (\r\n        <p className=\"text-center text-2xl\">Follow users to see photos!</p>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { Link } from \"react-router-dom\";\r\nimport Skeleton from \"react-loading-skeleton\";\r\n\r\nexport default function User({ username, fullName, avatar }) {\r\n  return !username || !fullName ? (\r\n    <Skeleton count={1} height={61} />\r\n  ) : (\r\n    <Link\r\n      to={`/p/${username}`}\r\n      className=\"grid grid-cols-4 gap-4 mb-6 items-center\"\r\n    >\r\n      <div className=\"flex items-center justify-between col-span-1\">\r\n        <img\r\n          src={avatar}\r\n          className=\"rounded-full h-12 w-12 flex mr-3 object-cover\"\r\n          alt=\"avi\"\r\n        />\r\n      </div>\r\n      <div className=\"col-span-3\">\r\n        <p className=\"text-sm font-bold\">{username}</p>\r\n        <p className=\"text-sm\">{fullName}</p>\r\n      </div>\r\n    </Link>\r\n  );\r\n}\r\nUser.propTypes = {\r\n  username: PropTypes.string,\r\n  fullName: PropTypes.string,\r\n};\r\n","import React, { useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport PropTypes from \"prop-types\";\r\nimport {\r\n  updateLoggedInUserFollowing,\r\n  updateFollowedUserFollowers,\r\n} from \"../../services/firebase\";\r\n\r\nexport default function SuggestedProfile({\r\n  profileDocId,\r\n  loggedInUserDocId,\r\n  username,\r\n  profileId,\r\n  userId,\r\n  avatar,\r\n}) {\r\n  const [followed, setFollowed] = useState(false);\r\n\r\n  async function handleFollowUser() {\r\n    setFollowed(true);\r\n\r\n    await updateLoggedInUserFollowing(loggedInUserDocId, profileId, false);\r\n    await updateFollowedUserFollowers(profileDocId, userId);\r\n  }\r\n\r\n  return !followed ? (\r\n    <div className=\"flex flex-row items-center align-items justify-between\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <img\r\n          src={avatar}\r\n          className=\"rounded-full h-8 w-8 flex object-cover mr-3\"\r\n          alt=\"avis\"\r\n        />\r\n        <Link to={`/p/${username}`}>\r\n          <p className=\"font-bold text-sm\">{username}</p>\r\n        </Link>\r\n      </div>\r\n      <button\r\n        className=\"text-xs font-bold text-blue-primary\"\r\n        type=\"button\"\r\n        onClick={handleFollowUser}\r\n      >\r\n        follow\r\n      </button>\r\n    </div>\r\n  ) : null;\r\n}\r\n\r\nSuggestedProfile.propTypes = {\r\n  profileDocId: PropTypes.string.isRequired,\r\n  username: PropTypes.string.isRequired,\r\n  profileId: PropTypes.string.isRequired,\r\n  userId: PropTypes.string.isRequired,\r\n  loggedInUserDocId: PropTypes.string.isRequired,\r\n};\r\n","import React, { useState, useEffect } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport Skeleton from \"react-loading-skeleton\";\r\nimport SuggestedProfile from \"./SuggestedProfile\";\r\nimport { getSuggestedProfiles } from \"../../services/firebase\";\r\n\r\nexport default function Suggestions({ userId, following, loggedInUserDocId }) {\r\n  const [profiles, setProfiles] = useState(null);\r\n\r\n  useEffect(() => {\r\n    async function suggestedProfiles() {\r\n      const response = await getSuggestedProfiles(userId, following);\r\n      setProfiles(response);\r\n    }\r\n\r\n    if (userId) {\r\n      suggestedProfiles();\r\n    }\r\n  }, [userId, following]);\r\n\r\n  return !profiles ? (\r\n    <Skeleton count={10} height={150} className=\"mt-5\" />\r\n  ) : profiles.length > 0 ? (\r\n    <div className=\"rounded flex flex-col\">\r\n      <div className=\"text-sm flex items-center align-items justify-between mb-2\">\r\n        <p className=\"font-bold text-gray-base\">Suggestions for you</p>\r\n      </div>\r\n      <div className=\"mt-4 grid gap-5\">\r\n        {profiles.map((profile) => (\r\n          <SuggestedProfile\r\n            key={profile.docId}\r\n            profileDocId={profile.docId}\r\n            username={profile.username}\r\n            profileId={profile.userId}\r\n            userId={userId}\r\n            avatar={profile.avatar}\r\n            loggedInUserDocId={loggedInUserDocId}\r\n          />\r\n        ))}\r\n      </div>\r\n    </div>\r\n  ) : null;\r\n}\r\n\r\nSuggestions.propTypes = {\r\n  userId: PropTypes.string,\r\n  following: PropTypes.array,\r\n  loggedInUserDocId: PropTypes.string,\r\n};\r\n","import React from \"react\";\r\nimport useUser from \"../../hooks/use-user\";\r\nimport User from \"./User\";\r\nimport Suggestions from \"./Suggestions\";\r\n\r\nexport default function Sidebar() {\r\n  // user info for further development\r\n  const { userInfo } = useUser();\r\n\r\n  // use destructuring the user to make further coding easier\r\n  // const {\r\n  //   user: { fullName, username, userId, following, avatar, docId },\r\n  // } = useUser();\r\n\r\n  return (\r\n    <div className=\"p-4 relative\">\r\n      <div className=\"fixed\">\r\n        <User\r\n          username={userInfo.username}\r\n          fullName={userInfo.fullName}\r\n          avatar={userInfo.avatar}\r\n        />\r\n        <Suggestions\r\n          userId={userInfo.userId}\r\n          following={userInfo.following}\r\n          loggedInUserDocId={userInfo.docId}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useEffect } from \"react\";\r\nimport Timeline from \"../components/Timeline\";\r\nimport Header from \"../components/Header\";\r\nimport Sidebar from \"../components/sidebar/Sidebar\";\r\n\r\nexport default function Dashboard() {\r\n  useEffect(() => {\r\n    document.title = \"instagram\";\r\n  }, []);\r\n  return (\r\n    <div className=\"bg-brown-light\">\r\n      <Header />\r\n      <div className=\"grid grid-cols-3 gap-4 justify between mx-auto max-w-screen-md\">\r\n        <Timeline />\r\n        <Sidebar />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"sourceRoot":""}